<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ“š Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;700&family=Noto+Color+Emoji&display=swap" rel="stylesheet">
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    font-family: 'Tajawal', 'Noto Color Emoji', sans-serif;
    color: #fff;
    transition: background 0.5s, color 0.5s;
  }

  /* --- Ø£Ù†Ø¸Ù…Ø© Ù…Ø®ØªÙ„ÙØ© Ù„Ù„Ù‡Ø§ØªÙ ÙˆØ§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± --- */
  @media (min-width: 769px) {
    body { 
      background: linear-gradient(135deg, #1e2a78, #4a47a3, #c4c1e0); 
      background-size: 400% 400%;
      animation: gradientShift 12s ease-in-out infinite alternate;
      text-align: center;
      padding: 100px 20px 40px;
      min-height: 100vh;
      overflow-x: hidden;
    }
    .countdown { 
      display: inline-block;
      margin: 20px;
      padding: 30px 25px;
      width: 280px;
      border-radius: 20px;
      background: rgba(255,255,255,0.1);
      box-shadow: 0 8px 25px rgba(0,0,0,0.25);
      transition: transform 0.4s ease, background 0.4s ease;
      backdrop-filter: blur(8px);
    }
    .countdown:hover { transform: translateY(-8px) scale(1.05); background: rgba(255,255,255,0.25); }
    #dailyGoal { height: 60px; }
  }

  @media (max-width: 768px) {
    body {
      background: linear-gradient(135deg, #1e2a78, #4a47a3, #c4c1e0);
      text-align: center;
      padding: 20px 10px 20px;
    }
    .countdown { 
      width: 90%;
      padding: 20px 15px;
      margin: 10px auto;
      border-radius: 20px;
      background: rgba(255,255,255,0.1);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    #dailyGoal { height: 50px; }
  }

  @keyframes gradientShift { 0% { background-position: left top; } 100% { background-position: right bottom; } }

  body.light { background: linear-gradient(135deg, #ffeedb, #f8cdda, #c4c1e0); color: #333; }
  body.light .countdown { background: rgba(255,255,255,0.6); color: #222; }
  body.light .progress-bar { background: #1e2a78; }
  body.light .tip { color: #1e2a78; }

  .top-bar {
    position: fixed;
    top: 0; left: 0; width: 100%;
    padding: 10px 20px;
    display: flex; justify-content: space-between; align-items: center;
    background: rgba(255, 255, 255, 0.15); backdrop-filter: blur(8px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;
    z-index: 1000; color: #f8f9fa; font-weight: 600; font-size: 1em;
  }

  .top-bar #weekNumber { position: absolute; left: 50%; transform: translateX(-50%); text-align: center; }

  #themeToggle { background:none; border:none; font-size:1.4em; color:#fff; cursor:pointer; transition: transform 0.3s ease; }
  #themeToggle:hover { transform: scale(1.2); }

  h1 { font-size:2.6em; margin-bottom:25px; font-weight:700; animation: fadeIn 1.5s ease; text-shadow:0 2px 10px rgba(0,0,0,0.25); }

  .countdown h2 { font-size:1.5em; margin-bottom:15px; font-weight:600; color:#ffe66d; }
  .time { font-size:1.8em; font-weight:bold; letter-spacing:1px; animation:pulse 1.5s infinite; }

  .progress-container { width: 100%; height: 10px; background: rgba(255,255,255,0.2); border-radius: 5px; margin-top:10px; }
  .progress-bar { height: 100%; background: #ffe66d; width: 0%; border-radius: 5px; transition: width 0.5s ease; }

  .tip { margin-top: 40px; font-size:1.3em; color:#ffd966; font-weight:600; transition: opacity 0.6s ease; }

  footer { margin-top:60px; font-size:1em; color: rgba(255,255,255,0.8); animation: fadeIn 2s ease; }
  footer span { color:#ffe66d; font-weight:bold; }

  #dailyGoal { width: 90%; padding: 15px; border-radius: 20px; text-align: center; font-size:1em; border:none; background: rgba(255,255,255,0.1); color:#fff; margin-bottom:10px; }
  #savedGoal { font-size:1em; margin-top:5px; color:#ffe66d; min-height:20px; }

  @keyframes pulse { 0% {opacity:1;} 50% {opacity:0.7;} 100% {opacity:1;} }
  @keyframes fadeIn { from {opacity:0; transform:translateY(-10px);} to {opacity:1; transform:translateY(0);} }
</style>
</head>
<body>

<div class="top-bar">
  <div id="currentDate">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ§Ø±ÙŠØ®...</div>
  <div id="weekNumber">Ø¬Ø§Ø±Ù Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹...</div>
  <button id="themeToggle" title="ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹">ğŸŒ™</button>
</div>

<h1>ğŸ“š Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª</h1>

<div class="countdown">
  <h2>ğŸ“ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ù…Ù†ØªØµÙ Ø§Ù„ÙØµÙ„</h2>
  <div id="midterm" class="time">Ø¬Ø§Ø±Ù Ø§Ù„Ø­Ø³Ø§Ø¨...</div>
  <div class="progress-container"><div class="progress-bar" id="midtermProgress"></div></div>
</div>

<div class="countdown">
  <h2>ğŸ“ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</h2>
  <div id="finals" class="time">Ø¬Ø§Ø±Ù Ø§Ù„Ø­Ø³Ø§Ø¨...</div>
  <div class="progress-container"><div class="progress-bar" id="finalsProgress"></div></div>
</div>

<div class="countdown">
  <h2>ğŸ¯ Ù‡Ø¯Ù Ø§Ù„ÙŠÙˆÙ…</h2>
  <input type="text" id="dailyGoal" placeholder="Ø§ÙƒØªØ¨ Ù‡Ø¯ÙÙƒ Ù„Ù„ÙŠÙˆÙ…...">
  <p id="savedGoal"></p>
</div>

<div class="countdown">
  <h2>ğŸ“Š Ù†Ø³Ø¨Ø© Ø¥Ù†Ø¬Ø§Ø² Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø©</h2>
  <input type="range" id="progressInput" min="0" max="100" step="1" style="width:90%;">
  <p id="progressText">Ø¥Ù†Ø¬Ø§Ø²Ùƒ: 0%</p>
</div>

<div class="countdown">
  <h2>ğŸ† Ù†Ù‚Ø§Ø· Ø§Ù„ØªØ­ÙÙŠØ²</h2>
  <p id="pointsDisplay">Ø¬Ø§Ø±Ù Ø§Ù„Ø­Ø³Ø§Ø¨...</p>
</div>

<div class="tip" id="dailyTip">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØµÙŠØ­Ø©...</div>
<footer>âœ¨ Ø¨Ø§Ù„ØªÙˆÙÙŠÙ‚ ÙÙŠ Ø§Ù…ØªØ­Ø§Ù†Ø§ØªÙƒ <span>ğŸ’ªğŸ“–</span></footer>

<script>
  function toRiyadhTime(date) {
    const utc = date.getTime() + date.getTimezoneOffset() * 60000;
    const riyadhOffset = 3 * 60 * 60000;
    return new Date(utc + riyadhOffset);
  }

  const semesterStart = new Date(Date.UTC(2025, 8, 7, 0, 0, 0));
  const midtermDate = new Date(Date.UTC(2025, 11, 4, 9, 0, 0));
  const finalsDate = new Date(Date.UTC(2026, 0, 4, 9, 0, 0));

  function getNowRiyadh(){ return toRiyadhTime(new Date()); }

  function updateDate() {
    const now = getNowRiyadh();
    const options = { weekday:'long', year:'numeric', month:'long', day:'numeric', timeZone:'Asia/Riyadh' };
    document.getElementById("currentDate").textContent = now.toLocaleDateString('ar-EG', options);
  }

  function updateWeekNumber(){
    const now = getNowRiyadh();
    const diff = now - semesterStart;
    let weekNumber = Math.ceil(diff/(1000*60*60*24*7));
    weekNumber += 2;
    const el = document.getElementById("weekNumber");
    if(weekNumber<1) el.textContent = "â³ Ø§Ù„ÙØµÙ„ Ù„Ù… ÙŠØ¨Ø¯Ø£ Ø¨Ø¹Ø¯";
    else if(weekNumber>16) el.textContent = "ğŸ‰ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ";
    else el.textContent = `ğŸ“… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ ${weekNumber}`;
  }

  function updateCountdown(){
    const now = getNowRiyadh().getTime();
    updateTimer("midterm", midtermDate-now,"ğŸ¯ Ø¨Ø¯Ø£Øª Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ù…Ù†ØªØµÙ Ø§Ù„ÙØµÙ„!", semesterStart.getTime(), midtermDate.getTime(), "midtermProgress");
    updateTimer("finals", finalsDate-now,"ğŸ Ø¨Ø¯Ø£Øª Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©!", midtermDate.getTime(), finalsDate.getTime(), "finalsProgress");
  }

  function updateTimer(elementId,distance,message,start,end,progressId){
    const el = document.getElementById(elementId);
    const progressBar = document.getElementById(progressId);

    if(distance<0){
      el.innerHTML=message;
      el.style.color="#ffe66d";
      progressBar.style.width="100%";
      return;
    }

    const days=Math.floor(distance/(1000*60*60*24));
    const hours=Math.floor((distance%(1000*60*60*24))/(1000*60*60));
    const minutes=Math.floor((distance%(1000*60*60))/(1000*60));
    const seconds=Math.floor((distance%(1000*60))/1000);

    el.innerHTML=`${days} ÙŠÙˆÙ… ${hours} Ø³Ø§Ø¹Ø© ${minutes} Ø¯Ù‚ÙŠÙ‚Ø© ${seconds} Ø«Ø§Ù†ÙŠØ©`;

    const totalDuration=end-start;
    const elapsed=new Date().getTime()-start;
    const progress=Math.min(Math.max((elapsed/totalDuration)*100,0),100);
    progressBar.style.width=progress+"%";
  }

  const tips = ["ğŸ“– Ø±Ø§Ø¬Ø¹ Ù…Ù„Ø®ØµØ§Øª Ø§Ù„Ø¯Ø±ÙˆØ³ ÙƒÙ„ ÙŠÙˆÙ…","â±ï¸ Ø®ØµØµ ÙˆÙ‚ØªÙ‹Ø§ Ù„Ù„Ø±Ø§Ø­Ø© Ø¨ÙŠÙ† Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø©","ğŸ“ Ø­Ù„ Ø£Ø³Ø¦Ù„Ø© Ø³Ø§Ø¨Ù‚Ø© Ù„Ù„ØªØ¯Ø±Ø¨","â˜• Ø§Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡ ÙˆØ§Ø¨ØªØ¹Ø¯ Ø¹Ù† Ø§Ù„Ø³Ù‡Ø± Ø§Ù„Ø²Ø§Ø¦Ø¯","ğŸ’ª Ø«Ù‚ Ø¨Ù†ÙØ³ÙƒØŒ Ø£Ù†Øª Ù‚Ø§Ø¯Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¬Ø§Ø­!","ğŸ˜´ Ø§Ø­Ø±Øµ Ø¹Ù„Ù‰ Ø§Ù„Ù†ÙˆÙ… Ø§Ù„ÙƒØ§ÙÙŠ","ğŸ“š Ù†Ø¸Ù… ÙˆÙ‚ØªÙƒ ÙˆÙ„Ø§ ØªØ¤Ø¬Ù„ Ù…Ù‡Ø§Ù…Ùƒ","ğŸ¤ Ø´Ø§Ø±Ùƒ Ø²Ù…Ù„Ø§Ø¡Ùƒ ÙÙŠ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©"];
  let tipIndex = 0;
  const tipElement=document.getElementById("dailyTip");
  function updateTip(){ tipElement.textContent=tips[tipIndex]; tipIndex=(tipIndex+1)%tips.length; }

  const pointsDisplay = document.getElementById("pointsDisplay");
  function updatePoints(){ pointsDisplay.textContent = `â­ Ù„Ø¯ÙŠÙƒ ${Math.floor(Math.random()*100)} Ù†Ù‚Ø§Ø· ØªØ­ÙÙŠØ²ÙŠØ©`; }

  const dailyGoal = document.getElementById("dailyGoal");
  const savedGoal = document.getElementById("savedGoal");
  const storedGoal = localStorage.getItem("dailyGoal") || "";
  dailyGoal.value = storedGoal;
  savedGoal.textContent = storedGoal;
  dailyGoal.addEventListener("keydown", function(e){
    if(e.key==="Enter"){
      e.preventDefault();
      localStorage.setItem("dailyGoal", dailyGoal.value);
      savedGoal.textContent = dailyGoal.value;
      dailyGoal.value = "";
    }
  });

  const progressInput = document.getElementById("progressInput");
  const progressText = document.getElementById("progressText");
  progressInput.addEventListener("input", ()=>{ progressText.textContent=`Ø¥Ù†Ø¬Ø§Ø²Ùƒ: ${progressInput.value}%`; });

  const themeToggle=document.getElementById("themeToggle");
  themeToggle.addEventListener("click",()=>{
    document.body.classList.toggle("light");
    themeToggle.textContent=document.body.classList.contains("light")?"ğŸŒ™":"â˜€ï¸";
  });

  updateDate();
  updateWeekNumber();
  updateCountdown();
  updateTip();
  updatePoints();
  setInterval(updateCountdown,1000);
  setInterval(updateTip,8000);
  setInterval(updatePoints,5000);
  setInterval(updateDate,60000);
  setInterval(updateWeekNumber,60000);
</script>
</body>
</html>
